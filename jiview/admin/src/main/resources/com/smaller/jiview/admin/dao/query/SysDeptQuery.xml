<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.smaller.jiview.admin.dao.query.SysDeptQuery">
    <sql id="common_limit">
        <if test="startRow != null and pageSize != null" >
            limit #{startRow}, #{pageSize}
        </if>
    </sql>
    <sql id="list_where">
        where 1 = 1
        <if test="parentId != null and parentId != ''" >
            AND parent_id = #{parentId}
        </if>
    </sql>
    <select id="list" resultType="com.smaller.jiview.core.pojo.model.SysDept">
       SELECT
        dept_id,
        parent_id,
        dept_name,
        leaf,
        sortno,
        remark,
        create_time,
        create_user_id
        FROM sys_dept
        <include refid="list_where"/>
        ORDER BY dept_id,sortno
        <include refid="common_limit" />
    </select>
    <select id="count" resultType="java.lang.Long">
        SELECT
        COUNT(*)
        FROM sys_dept
        <include refid="list_where"/>
    </select>

    <select id="listDept" resultType="com.smaller.jiview.core.pojo.model.SysDept">
        SELECT
        dept_id,
        parent_id,
        dept_name
        FROM sys_dept
    </select>
</mapper>
